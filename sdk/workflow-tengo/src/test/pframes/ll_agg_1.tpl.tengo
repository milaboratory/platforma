// ll_agg_1

self := import(":tpl")

ll := import(":ll")
pLl := import(":pframes.ll")

bodyTpl := ll.importTemplate(":test.pframes.agg_body_pure")

self.awaitState("InputsLocked")
self.awaitState("params", "ResourceReady")

self.body(func(inputs) {
	params := inputs.params
	if is_undefined(inputs.base) {
		return {
			result: pLl.aggregate(inputs.data, params.indices, bodyTpl, ["result"], params.eph).output("result")
		}
	} else {
		return {
			result: pLl.aggregate(inputs.data, params.indices, bodyTpl, ["result"], params.eph, {base: inputs.base} ).output("result")
		}
	}
})
