// ll_agg_1

self := import(":tpl")

ll := import(":ll")
assets := import(":assets")
pLl := import(":pframes.ll")

bodyTpl := assets.importTemplate(":pframes.test.agg_body_pure")

self.awaitState("InputsLocked")
self.awaitState("params", "ResourceReady")

self.body(func(inputs) {
	params := inputs.params
	if is_undefined(inputs.base) {
		return {
			result: pLl.aggregate(inputs.data, params.indices, bodyTpl, [{ type: "Resource", name: "result" }], params.eph).output("result")
		}
	} else {
		return {
			result: pLl.aggregate(inputs.data, params.indices, bodyTpl, [{ type: "Resource", name: "result" }], params.eph, {base: inputs.base} ).output("result")
		}
	}
})
