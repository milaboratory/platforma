# This workflow will do a clean install of node dependencies,
# cache/restore them, build the source code and run tests across different OS

name: Build NodeJS Libraries
on:
  push:
    branches:
      - 'main'
    tags:
      - 'v*'
  workflow_dispatch: {}
jobs:
  init:
    runs-on: ubuntu-latest
    steps:
      - uses: milaboratory/github-ci/actions/context/init@v4-beta
        with:
          version-canonize: false
          branch-versioning: main
  run:
    needs:
      - init
    uses: milaboratory/github-ci-internal/.github/workflows/node-monorepo.yaml@v4-beta
    with:
      app-name: JSTools
      app-name-slug: 'jstools'
      node-version: '20.x'
      build-script-name: 'build'
      is-electron-application: 'false'
      always-auth: 'true'
      notify-telegram: true
    secrets:
      env: ""
      TELEGRAM_NOTIFICATION_TARGET: ${{ secrets.TG_CHANNEL_MIBUILDS }}
      TELEGRAM_API_TOKEN: ${{ secrets.TG_CI_BOT_TOKEN }}
