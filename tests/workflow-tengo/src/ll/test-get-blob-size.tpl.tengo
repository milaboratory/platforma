self := import("@platforma-sdk/workflow-tengo:tpl")
plapi := import("plapi")
file := import("@platforma-sdk/workflow-tengo:file")

// Define outputs
self.defineOutputs("size")

self.prepare(func(inputs) {
    result := file.importFile(inputs.file)
    return {
        blob: result.file
    }
})

self.body(func(inputs) {
    size := plapi.getBlobSize(inputs.blob.id)
    return {
        size: size
    }
})
